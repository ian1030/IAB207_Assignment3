{% extends 'base.html' %}

{% import "bootstrap4/form.html" as wtf %}

{% block content %}

{% with messages = get_flashed_messages() %}
{% if messages %} <!-- check if there are any messages -->
<div class="container-fluid">
    <div class="row mt-3 mb-3">
    <div class="col-md-12">
    {% for message in messages %} <!--loop through the messages-->
        <div class="alert alert-info">{{ message }}</div> <!--display as alert-->
    {% endfor %}
    </div>
</div>
</div>
{% endif %}
{% endwith %}

<div class="container mt-5">
    <div class="row">
      <div class="col-md-6">
        <img src="{{ event.event_image }}" class="img-fluid" alt="Event Image" />
      </div>
      <div class="col-md-6">
        <h1 class="mb-3">{{ event.event_name }}</h1>
        <p>{{ event.event_description }}</p>
        <p>Date: {{ event.event_date.strftime('%d %B, %Y') }}</p>
        <p>Time: {{ event.event_time.strftime('%I:%M %p') }}</p>
        <p>Venue: {{ event.event_location }}</p>
        <form>

    <button type="button" class="btn btn-outline-dark btn btn-light" data-bs-toggle="modal" data-bs-target="#booking">
    Book Event
    </button>

        <div class="modal fade" id="booking" tabindex="-1" aria-labelledby="bookingLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
            <div class="modal-header">
            <h5 class="modal-title" id="bookingLabel">Book Event</h5>
            </div>
            <div class="modal-body">
                {{wtf.render_form(form)}}
            </div>
            <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            <button type="submit" class="btn btn-outline-dark btn btn-light">Continue to checkout</button>
            </div>
        </div>
        </div>
        </div>

        </form>
      </div>
    </div>
    <hr>
    <div class="row mt-5">
      <div class="col-md-12">
          <section class="content-item" id="comments">
              <div class="container">   
                  <div class="row">
                      <div class="col-sm-8">   
                          <form>
                              <h3 class="pull-left">New Comment</h3>
                              <button type="submit" class="btn btn-outline-dark pull-right" style="margin-bottom:10px">Submit</button>
                              <fieldset>
                                  <div class="row">
                                      <div class="col-sm-3 col-lg-2 hidden-xs">
                                      </div>
                                      <div class="form-group col-xs-12 col-sm-9 col-lg-10">
                                          <textarea class="form-control" id="message" placeholder="Your message" required=""></textarea>
                                      </div>
                                  </div>  	
                              </fieldset>
                          </form>
                          
                          <h3>{{ comments|length }} Comments</h3>
                          
                          {% for comment in comments %}
                          <div class="media">
                              <a class="pull-left" href="#"><img class="media-object" src="person.png" alt=""></a>
                              <div class="media-body">
                                  <h4 class="media-heading">{{ comment.user.name }}</h4>
                                  <p>{{ comment.comment }}</p>
                                  <ul class="list-unstyled list-inline media-detail pull-left">
                                      <li><i class="fa fa-calendar"></i>{{ comment.comment_date.strftime('%d/%m/%Y') }}</li>
                                      <li><i class="fa fa-thumbs-up"></i>{{ comment.likes }}</li>
                                  </ul>
                                  <ul class="list-unstyled list-inline media-detail pull-right">
                                      <li class=""><a href="">Like</a></li>
                                      <li class=""><a href="">Reply</a></li>
                                  </ul>
                              </div>
                          </div>
                          {% endfor %}

                      </div>
                  </div>
              </div>
              </div>
          </section>
      </div>
    </div>
  </div>

{% endblock %}
